# Flyweight Pattern (플라이웨이트 패턴)

## 🎯 목적
Flyweight 패턴은 많은 수의 유사한 객체들을 효율적으로 관리하기 위해 사용되는 구조적 디자인 패턴입니다. 
객체의 공통된 내재적 상태(Intrinsic State)를 공유하여 메모리 사용량을 최소화합니다.

## 🔑 핵심 개념

### 내재적 상태 (Intrinsic State)
- 여러 객체들이 공유할 수 있는 불변 상태
- 객체의 컨텍스트에 독립적인 정보

### 외재적 상태 (Extrinsic State)
- 각 객체마다 고유한 상태
- 클라이언트가 메서드 호출 시 매개변수로 전달

## 🏗️ 구조
┌────────┐      ┌──────────────────┐
│ Client │─────>│ FlyweightFactory │
└────────┘      └──────────┬───────┘
                         │ (creates & manages)
                         │
         ┌───────────────┴───────────────┐
         │                               │
┌───────────────────┐      ┌───────────────────┐
│ ConcreteFlyweight │      │ ConcreteFlyweight │ ...
│(Intrinsic State)│      │(Intrinsic State)│
└─────────┬─────────┘      └─────────┬─────────┘
          │ (implements)             │ (implements)
          └─────────────┬────────────┘
                        ↓
                 ┌───────────┐
                 │ Flyweight │ (Interface)
                 └───────────┘

## 📋 구성 요소

1. **Flyweight (인터페이스)**
   - 플라이웨이트가 받고 동작할 수 있는 인터페이스 정의

2. **ConcreteFlyweight (구체적 플라이웨이트)**
   - Flyweight 인터페이스를 구현하고 내재적 상태를 저장

3. **FlyweightFactory (플라이웨이트 팩토리)**
   - 플라이웨이트 객체를 생성하고 관리
   - 동일한 내재적 상태를 가진 객체는 재사용

4. **Context (컨텍스트)**
   - 외재적 상태를 저장하고 플라이웨이트를 참조

## ✅ 장점
- **메모리 효율성**: 동일한 객체를 재사용하여 메모리 사용량 감소
- **성능 향상**: 객체 생성 비용 절약
- **확장성**: 많은 수의 객체를 효율적으로 처리

## ❌ 단점
- **복잡성 증가**: 내재적/외재적 상태 분리로 코드 복잡도 증가
- **동기화 이슈**: 멀티스레드 환경에서 팩토리 관리 복잡
- **메모리 참조**: 객체가 메모리에서 해제되지 않아 가비지 컬렉션 영향

## 📝 예제 설명

### ex01: 도서 관리 시스템
- **Book**: 도서의 기본 정보 (내재적 상태)
- **BookShelf**: 도서 인스턴스를 관리하는 팩토리
- 동일한 도서는 하나의 객체로 관리되고, 개별 위치 정보는 외재적으로 처리

### ex02: 폰트 시스템
- **Font**: 폰트 인터페이스
- **ConcreteFont**: 구체적인 폰트 구현 (내재적 상태: 폰트명, 크기)
- **FontFactory**: 폰트 객체 생성 및 관리
- 텍스트 내용과 위치는 외재적 상태로 처리

## 🎯 사용 시기
- 많은 수의 유사한 객체가 필요한 경우
- 객체 생성 비용이 높은 경우
- 객체의 대부분 상태가 외재적으로 저장 가능한 경우
- 객체 그룹을 적은 수의 공유 객체로 대체 가능한 경우

## 🔗 관련 패턴
- **Factory Method**: 플라이웨이트 생성에 활용
- **Singleton**: 팩토리를 싱글톤으로 구현
- **Composite**: 구조적 공유에 플라이웨이트 적용 가능